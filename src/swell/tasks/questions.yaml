analysis_forecast_window_offset:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: What is the duration from the middle of the window when forecasts start?
  tasks:
  - store_backgr:qound
  - get_background
  type: duration

analysis_variables:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: What are the analysis variables?
  tasks:
  - run_jedi_executable_base
  type: string-check-list

background_error_model:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: Which background error model do you want to use?
  tasks:
  - generate_b_climatology
  type: string-drop-list

background_experiment:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  prompt: What is the name of the name of the experiment providing the backgrounds?
  tasks:
  - get_background
  type: string

background_frequency:
  ask_question: false
  default_value: defer_to_model
  depends:
    key: window_type
    value: 4D
  models:
  - all
  prompt: What is the frequency of the background files?
  tasks:
  - get_background
  - run_jedi_executable_base
  type: duration

background_time_offset:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: How long before the middle of the analysis window did the background providing forecast begin?
  tasks:
  - save_obs_diags
  - get_observations
  - eva_observations
  - run_jedi_executable_base
  type: duration

bundles:
  ask_question: true
  default_value:
  - 'fv3-jedi'
  - 'soca'
  - 'iodaconv'
  options:
  - 'fv3-jedi'
  - 'soca'
  - 'iodaconv'
  - 'ufo'
  - 'ioda'
  - 'oops'
  - 'saber'
  prompt: Which JEDI bundles do you wish to build?
  tasks:
  - build_jedi
  - clone_jedi
  type: string-check-list

clean_patterns:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: Provide a list of patterns that you wish to remove from the cycle directory.
  tasks:
  - clean_cycle
  type: string-list

crtm_coeff_dir:
  ask_question: false
  default_value: defer_to_platform
  models:
  - geos_atmosphere
  prompt: What is the path to the CRTM coefficient files?
  tasks:
  - save_obs_diags
  - get_observations
  - eva_observations
  - run_jedi_executable_base
  type: string

existing_geos_gcm_build_path:
  ask_question: true
  default_value: defer_to_platform
  depends:
    key: geos_build_method
    value: use_existing
  prompt: What is the path to the existing GEOS build directory?
  tasks:
  - build_geos_by_linking
  type: string

existing_jedi_build_directory:
  ask_question: true
  default_value: defer_to_platform
  depends:
    key: jedi_build_method
    value: use_existing
  prompt: What is the path to the existing JEDI build directory?
  tasks:
  - build_jedi_by_linking
  type: string

existing_geos_gcm_source_path:
  ask_question: true
  default_value: defer_to_platform
  depends:
    key: geos_build_method
    value: use_existing
  prompt: What is the path to the existing GEOS source code directory?
  tasks:
  - clone_geos
  type: string

existing_jedi_source_directory:
  ask_question: true
  default_value: defer_to_platform
  depends:
    key: jedi_build_method
    value: use_existing
  prompt: What is the path to the existing JEDI source code directory?
  tasks:
  - clone_jedi
  type: string

geos_background_restart_offset:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: Duration before the middle of the window used in GEOS restart tar file.
  tasks:
  - get_background_geos_experiment
  type: duration

geos_bkg_filename_template:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: Name of the background files as output by GEOS (with date and time templated).
  tasks:
  - get_background_geos_experiment
  type: string

geos_bkg_tar_filename_template:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: Name of the GEOS backgrounds tar file (with date and time templated
  tasks:
  - get_background_geos_experiment
  type: string

geos_build_method:
  ask_question: true
  default_value: use_existing
  options:
  - 'use_existing'
  - 'create'
  prompt: Do you want to use an existing GEOS build or create a new build?
  tasks:
  - build_geos
  - clone_geos
  - build_geos_by_linking
  type: string-drop-list

geos_gcm_tag:
  ask_question: true
  default_value: v11.0.2
  prompt: Which GEOS tag do you wish to clone?
  tasks:
  - clone_geos
  type: string

gradient_norm_reduction:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: What value of gradient norm reduction for convergence?
  tasks:
  - run_jedi_executable_base
  type: float

horizontal_resolution:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: What is the horizontal resolution for the forecast model and backgrounds?
  tasks:
  - generate_b_climatology_by_linking
  - stage_jedi
  - store_background
  - generate_b_climatology
  - get_background
  - run_jedi_executable_base
  type: string-drop-list

jedi_bkg_filename_template:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: What is the name of the background as used by JEDI (with date and time templated)
  tasks:
  - get_background_geos_experiment
  type: string

jedi_build_method:
  ask_question: true
  default_value: use_existing
  options:
  - 'use_existing'
  - 'create'
  prompt: Do you want to use an existing JEDI build or create a new build?
  tasks:
  - build_jedi
  - clone_jedi
  - build_jedi_by_linking
  type: string

minimizer:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: Which data assimilation minimizer do you wish to use?
  tasks:
  - run_jedi_executable_base
  type: string-drop-list

jedi_forecast_model:
  ask_question: true
  default_value: defer_to_model
  depends:
    key: window_type
    value: 4D
  models:
  - all
  options: defer_to_model
  prompt: What forecast model should be used within JEDI for 4D window propagation?
  tasks:
  - run_jedi_executable_base
  type: string-drop-list

npx_proc:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: What number of processors do you wish to use in the x-direction?
  tasks:
  - generate_b_climatology_by_linking
  - generate_b_climatology
  - run_jedi_hofx_executable
  - run_jedi_variational_executable
  - run_jedi_executable_base
  type: integer

npy_proc:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_atmosphere
  prompt: What number of processors do you wish to use in the y-direction?
  tasks:
  - generate_b_climatology_by_linking
  - generate_b_climatology
  - run_jedi_hofx_executable
  - run_jedi_variational_executable
  - run_jedi_executable_base
  type: integer

number_of_iterations:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: What number of iterations do you wish to use for each outer loop? Provide a list of integers the same length as the number of outer loops.
  tasks:
  - run_jedi_executable_base
  type: integer-list

obs_experiment:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  prompt: What is the database providing the observations?
  tasks:
  - get_observations
  type: string

obs_provider:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  prompt: What is the group providing the observations?
  tasks:
  - get_observations
  type: string

observations:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: Which observations do you want to include?
  tasks:
  - save_obs_diags
  - get_observations
  - eva_observations
  - run_jedi_executable_base
  type: string-check-list

static_background_error_model:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: Which static background error model do you want to use?
  tasks:
  - generate_b_climatology_by_linking
  type: string-drop-list

swell_static_files:
  ask_question: false
  default_value: defer_to_platform
  models:
  - all
  prompt: What is the path to the Swell Static files directory?
  tasks:
  - generate_b_climatology_by_linking
  - stage_jedi
  - generate_b_climatology
  - run_jedi_executable_base
  type: string

swell_static_files_user:
  ask_question: false
  default_value: None
  models:
  - all
  prompt: What is the path to the user provided Swell Static Files directory?
  tasks:
  - generate_b_climatology_by_linking
  type: string

total_processors:
  ask_question: true
  default_value: defer_to_model
  models:
  - geos_ocean
  prompt: What is the number of processors for JEDI?
  tasks:
  - generate_b_climatology
  - run_jedi_hofx_executable
  - run_jedi_variational_executable
  type: integer

vertical_resolution:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  options: defer_to_model
  prompt: What is the vertical resolution for the forecast model and background?
  tasks:
  - generate_b_climatology_by_linking
  - stage_jedi
  - generate_b_climatology
  - run_jedi_executable_base
  type: string-drop-list

window_length:
  ask_question: false
  default_value: defer_to_model
  models:
  - all
  prompt: What is the duration for the data assimilation window?
  tasks:
  - store_background
  - get_background
  - get_observations
  - run_jedi_executable_base
  type: duration

window_offset:
  ask_question: true
  default_value: defer_to_model
  models:
  - all
  prompt: What is the duration between the middle of the window and the beginning?
  tasks:
  - store_background
  - save_obs_diags
  - get_background
  - get_observations
  - eva_observations
  - run_jedi_executable_base
  type: duration

window_type:
  ask_question: true
  default_value: 4D
  models:
  - all
  options:
  - '3D'
  - '4D'
  prompt: Do you want to use a 3D or 4D (including FGAT) window?
  tasks:
  - store_background
  - get_background
  - run_jedi_hofx_executable
  - run_jedi_variational_executable
  type: string-drop-list
